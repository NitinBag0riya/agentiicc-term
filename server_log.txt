
> aster-bot@1.0.0 start
> bun run src/main.ts

ğŸ¤– Starting Aster Trading Bot...

[Redis] Connecting to: redis://localhost:6379
[Redis] âœ… Connected successfully
[Postgres] Connecting...
[Postgres] CA certificate not found, using basic SSL
[Postgres] âœ… Connected successfully
[Postgres] Server time: 2025-12-24T13:20:04.607Z
[Postgres] Initializing schema...
[Postgres] âœ… Schema initialized
[Encryption] âœ… Initialized
[Ngrok] ğŸ“¡ Detected dynamic ngrok URL: https://b2be89058ab9.ngrok-free.app
[Bot] Creating bot...
[Bot] âœ… Bot created
[Bot] Setting up commands...
[Bot] âœ… Commands configured
[BotInfo] Bot username set: @My_Test_Tradeee_bot
âœ… Bot authenticated: @My_Test_Tradeee_bot (Test Unified Trading)

[Bot] âœ… Command menu set
[ExchangeInfo] ğŸš€ Starting exchange info service...
[ExchangeInfo] ğŸ“¥ Fetching exchange info...
[ExchangeInfo] âœ… Fetched spot exchange info (41 symbols)
[ExchangeInfo] âœ… Fetched futures exchange info (263 symbols)
[ExchangeInfo] âœ… Exchange info cached
[ExchangeInfo] âœ… Service started (refresh every 10 minutes)
[PriceCache] ğŸš€ Starting price cache service...
[PriceCache] ğŸ“¥ Fetching prices via HTTP (fallback)...
[PriceCache] âœ… Fetched spot prices via HTTP (39 symbols)
[PriceCache] âœ… Fetched futures prices via HTTP (260 symbols)
[PriceCache] âœ… HTTP prices cached
[PriceCache] ğŸ”Œ Connecting to WebSocket...
[PriceCache] âœ… Service started (WebSocket + HTTP fallback)
ğŸŒ Mounting Backend API routes...
âœ… Backend API routes mounted
[Webhook] âœ… Webhook registered with Telegram
ğŸš€ Bot is running in WEBHOOK mode
ğŸ“¡ Webhook URL: https://b2be89058ab9.ngrok-free.app/webhook
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ¥ Health check: http://localhost:3000/health
ğŸ”¢ Instance ID: unknown
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
[PriceCache] âœ… WebSocket connected
[PriceCache] ğŸ“Š WebSocket prices updated (9 changed, 260 total)
[API Error] 170 |         price: data.price,
171 |         status: data.status,
172 |         timestamp: data.updateTime || Date.now()
173 |       };
174 |     } catch (error) {
175 |       throw new Error(`Failed to place Aster order: ${error}`);
                      ^
error: Failed to place Aster order: Error: Aster API Error: 400 - {"code":-2019,"msg":"Margin is insufficient."}
      at placeOrder (/Users/nitinbagoriya/Downloads/Archive/src/backend/adapters/aster.adapter.ts:175:17)
      at async <anonymous> (/Users/nitinbagoriya/Downloads/Archive/src/backend/api/routes.ts:239:28)
      at async <anonymous> (/Users/nitinbagoriya/Downloads/Archive/src/backend/middleware/auth.ts:73:13)

[API Error] 170 |         price: data.price,
171 |         status: data.status,
172 |         timestamp: data.updateTime || Date.now()
173 |       };
174 |     } catch (error) {
175 |       throw new Error(`Failed to place Aster order: ${error}`);
                      ^
error: Failed to place Aster order: Error: Aster API Error: 400 - {"code":-1111,"msg":"Precision is over the maximum defined for this asset."}
      at placeOrder (/Users/nitinbagoriya/Downloads/Archive/src/backend/adapters/aster.adapter.ts:175:17)
      at async <anonymous> (/Users/nitinbagoriya/Downloads/Archive/src/backend/api/routes.ts:239:28)
      at async <anonymous> (/Users/nitinbagoriya/Downloads/Archive/src/backend/middleware/auth.ts:73:13)

[AsterAdapter] Canceling all orders for: BTCUSDT
[AsterAdapter] Cancel all response: {"code":200,"msg":"The operation of cancel all open order is done."}
[ExchangeInfo] ğŸ“¥ Fetching exchange info...
[ExchangeInfo] âœ… Fetched spot exchange info (41 symbols)
[ExchangeInfo] âœ… Fetched futures exchange info (263 symbols)
[ExchangeInfo] âœ… Exchange info cached
[PriceCache] âœ… Fetched spot prices via HTTP (39 symbols)
